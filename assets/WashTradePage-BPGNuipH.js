import{j as e,P as d}from"./index-BzLZZE_v.js";import{C as u,A as o}from"./AlertsTable-C4npM6YQ.js";import{N as c}from"./NetworkGraph-BMlZL5Tq.js";const m=[{tradeId:"WT1-0041",userId:"USR-2281",accountA:"ACC-2281-A",accountB:"ACC-2281-B",symbol:"BTC/USD",amount:24500,timestamp:"2024-01-11 09:14:32",flagged:!0},{tradeId:"WT1-0042",userId:"USR-2281",accountA:"ACC-2281-A",accountB:"ACC-2281-C",symbol:"BTC/USD",amount:18200,timestamp:"2024-01-11 09:14:45",flagged:!0},{tradeId:"WT1-0058",userId:"USR-4490",accountA:"ACC-4490-A",accountB:"ACC-4490-B",symbol:"ETH/USD",amount:31700,timestamp:"2024-01-15 14:22:10",flagged:!0},{tradeId:"WT1-0063",userId:"USR-7712",accountA:"ACC-7712-A",accountB:"ACC-7712-B",symbol:"SOL/USD",amount:8900,timestamp:"2024-01-18 11:05:48",flagged:!0},{tradeId:"WT1-0071",userId:"USR-3305",accountA:"ACC-3305-A",accountB:"ACC-3305-B",symbol:"BTC/USD",amount:42100,timestamp:"2024-01-21 16:33:19",flagged:!0}],r=[{userId:"USR-1120",counterpartyId:"USR-1121",symbol:"BTC/USD",trades:47,totalNotional:385e3,avgTimeDelta:12.4,advPct:42.1,flagged:!0},{userId:"USR-3340",counterpartyId:"USR-3341",symbol:"ETH/USD",trades:31,totalNotional:214e3,avgTimeDelta:8.7,advPct:35.8,flagged:!0},{userId:"USR-5580",counterpartyId:"USR-5582",symbol:"SOL/USD",trades:22,totalNotional:127e3,avgTimeDelta:19.2,advPct:31.5,flagged:!0},{userId:"USR-6670",counterpartyId:"USR-6671",symbol:"BTC/USD",trades:14,totalNotional:89e3,avgTimeDelta:45.6,advPct:18.3,flagged:!1},{userId:"USR-8890",counterpartyId:"USR-8891",symbol:"AVAX/USD",trades:9,totalNotional:52e3,avgTimeDelta:62.1,advPct:12.7,flagged:!1},{userId:"USR-2210",counterpartyId:"USR-2215",symbol:"ETH/USD",trades:6,totalNotional:34e3,avgTimeDelta:88.3,advPct:8.4,flagged:!1}],l={nodes:[{id:"A1",x:.1,y:.8,group:"Community A",label:"USR-1120"},{id:"A2",x:.25,y:.95,group:"Community A",label:"USR-1121"},{id:"A3",x:.35,y:.75,group:"Community A",label:"USR-1124"},{id:"A4",x:.15,y:.6,group:"Community A",label:"USR-1130"},{id:"B1",x:.55,y:.85,group:"Community B",label:"USR-3340"},{id:"B2",x:.7,y:.95,group:"Community B",label:"USR-3341"},{id:"B3",x:.8,y:.78,group:"Community B",label:"USR-3345"},{id:"B4",x:.65,y:.65,group:"Community B",label:"USR-3348"},{id:"C1",x:.3,y:.3,group:"Community C",label:"USR-5580"},{id:"C2",x:.5,y:.35,group:"Community C",label:"USR-5582"},{id:"C3",x:.45,y:.15,group:"Community C",label:"USR-5585"},{id:"C4",x:.2,y:.15,group:"Community C",label:"USR-5590"}],edges:[{source:"A1",target:"A2",weight:4},{source:"A1",target:"A3",weight:3},{source:"A1",target:"A4",weight:2},{source:"A2",target:"A3",weight:3},{source:"A2",target:"A4",weight:2},{source:"A3",target:"A4",weight:2},{source:"B1",target:"B2",weight:4},{source:"B1",target:"B3",weight:3},{source:"B1",target:"B4",weight:2},{source:"B2",target:"B3",weight:2},{source:"B2",target:"B4",weight:3},{source:"B3",target:"B4",weight:2},{source:"C1",target:"C2",weight:3},{source:"C1",target:"C3",weight:2},{source:"C1",target:"C4",weight:2},{source:"C2",target:"C3",weight:3},{source:"C2",target:"C4",weight:2},{source:"C3",target:"C4",weight:2}]},g=[{name:"WT_time_window",value:"1 day",description:"Rolling window for aggregating trades between counterparties"},{name:"WT_timedelta",value:"60 seconds",description:"Maximum time gap between matching buy/sell orders to flag as coordinated"},{name:"WT_notional_threshold",value:"$5,000",description:"Minimum notional value of wash trade pair to trigger alert"},{name:"WT_ADV_PCT",value:"30%",description:"Minimum percentage of ADV that paired trading must exceed"},{name:"WT_volume_pct",value:"50%",description:"Minimum percentage of a user pair total volume that must be mutual"},{name:"net_value_threshold_percent",value:"0.5%",description:"Maximum net value as percentage of gross to qualify as wash"},{name:"score_threshold",value:"5",description:"Minimum community detection score to flag a network cluster"}],C=()=>{const a=[...r].sort((t,n)=>n.totalNotional-t.totalNotional),i=a.map(t=>t.userId+" / "+t.counterpartyId),s=a.map(t=>t.totalNotional);return e.jsxs(u,{title:"Wash Trade Detection (WT)",category:"Trade Surveillance",description:e.jsx(e.Fragment,{children:e.jsx("p",{children:"Detects wash trading across three detection types: self-trading between accounts owned by the same user, coordinated high-frequency trading between counterparties, and community-based network detection using the Louvain algorithm."})}),parameters:g,detectionLogic:e.jsxs("ol",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Type 1 – Self-Trading:"})," Identify trades where the same user owns both sides of a transaction across different accounts."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Type 2 – Counterparty Coordination:"})," Detect pairs of users with abnormally frequent, closely timed opposing trades that exceed ADV percentage thresholds."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Type 3 – Community Detection:"})," Apply Louvain algorithm to trading graph to identify densely connected clusters exhibiting wash-like patterns."]})]}),children:[e.jsx("h4",{children:"Type 1: Self-Trading"}),e.jsx(o,{title:"Self-Trade Alerts",columns:[{key:"tradeId",label:"Trade ID"},{key:"userId",label:"User"},{key:"accountA",label:"Account A"},{key:"accountB",label:"Account B"},{key:"symbol",label:"Symbol"},{key:"amount",label:"Amount",format:t=>"$"+Number(t).toLocaleString()},{key:"timestamp",label:"Timestamp"}],rows:m,flagKey:"flagged"}),e.jsx("h4",{children:"Type 2: Counterparty Coordination"}),e.jsxs("div",{className:"compliance-chart-container",children:[e.jsx("h5",{children:"Top Pairs by Total Notional"}),e.jsx(d,{className:"plotly-chart",data:[{y:i,x:s,type:"bar",orientation:"h",marker:{color:"#395E9D",opacity:.85},hovertemplate:"%{y}<br>$%{x:,.0f}<extra></extra>"}],layout:{margin:{t:20,l:160,r:20,b:40},xaxis:{title:"Total Notional ($)",tickformat:",.0f"},yaxis:{automargin:!0},paper_bgcolor:"white",plot_bgcolor:"white"},config:{displayModeBar:!1,responsive:!0},useResizeHandler:!0,style:{width:"100%",height:"280px"}})]}),e.jsx(o,{title:"Counterparty Pair Alerts",columns:[{key:"userId",label:"User"},{key:"counterpartyId",label:"Counterparty"},{key:"symbol",label:"Symbol"},{key:"trades",label:"Trades"},{key:"totalNotional",label:"Total Notional",format:t=>"$"+Number(t).toLocaleString()},{key:"avgTimeDelta",label:"Avg Time Delta (s)",format:t=>t+"s"},{key:"advPct",label:"ADV %",format:t=>t+"%"}],rows:r,flagKey:"flagged"}),e.jsx("h4",{children:"Type 3: Community Detection"}),e.jsx(c,{nodes:l.nodes,edges:l.edges,title:"Wash Trade Network Communities"})]})};export{C as default};

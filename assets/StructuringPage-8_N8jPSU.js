import{j as e,P as p}from"./index-DJA02MhZ.js";import{C as h,A as f}from"./AlertsTable-CdqYktS0.js";const u=["#395E9D","#E24A33","#348ABD","#988ED5","#777777","#FBC15E","#8EBA42","#FFB5B8"],x=({series:o,title:r,thresholdValue:t,thresholdLabel:n})=>{if(!o||!o.length)return e.jsx("div",{className:"chart-empty",children:"No timeline data available."});const i=o.map((a,g)=>({x:a.data.map(s=>s.date),y:a.data.map(s=>s.amount),type:"scatter",mode:"lines+markers",name:a.label,line:{color:a.color||u[g%u.length],width:2},marker:{size:5},hovertemplate:a.label+"<br>%{x}<br>%{y:,.2f}<extra></extra>"})),l=[];t!=null&&l.push({type:"line",x0:0,x1:1,xref:"paper",y0:t,y1:t,line:{color:"red",width:2,dash:"dash"}});const d=[];return t!=null&&n&&d.push({x:1,xref:"paper",y:t,yanchor:"bottom",xanchor:"right",text:n,showarrow:!1,font:{size:12,color:"red"}}),e.jsx(p,{className:"plotly-chart",data:i,layout:{title:{text:r||"",font:{size:18,color:"#395E9D"},x:.5,xanchor:"center"},xaxis:{title:"Date",titlefont:{size:16},tickfont:{size:14},showgrid:!0,gridwidth:1,gridcolor:"Gray"},yaxis:{title:"Amount",titlefont:{size:16},tickfont:{size:14},showgrid:!0,gridwidth:1,gridcolor:"Gray"},shapes:l,annotations:d,margin:{t:60,l:60,r:20,b:60},paper_bgcolor:"white",plot_bgcolor:"white",hovermode:"x unified",legend:{orientation:"h",y:-.2}},config:{displayModeBar:!1,responsive:!0},useResizeHandler:!0,style:{width:"100%",height:"320px"}})},c=[{accountId:"ACC-4410",deposits:[{date:"2024-01-05",amount:9800},{date:"2024-01-06",amount:9500},{date:"2024-01-08",amount:9700},{date:"2024-01-10",amount:9900},{date:"2024-01-12",amount:9600}],totalAmount:48500,depositCount:5,flagged:!0},{accountId:"ACC-7723",deposits:[{date:"2024-01-03",amount:9200},{date:"2024-01-04",amount:9400},{date:"2024-01-07",amount:9100},{date:"2024-01-09",amount:9300}],totalAmount:37e3,depositCount:4,flagged:!0},{accountId:"ACC-1156",deposits:[{date:"2024-01-11",amount:9950},{date:"2024-01-13",amount:9850},{date:"2024-01-14",amount:9750}],totalAmount:29550,depositCount:3,flagged:!0},{accountId:"ACC-8890",deposits:[{date:"2024-01-02",amount:5200},{date:"2024-01-15",amount:12500}],totalAmount:17700,depositCount:2,flagged:!1},{accountId:"ACC-3302",deposits:[{date:"2024-01-06",amount:7800},{date:"2024-01-20",amount:3200}],totalAmount:11e3,depositCount:2,flagged:!1}],y=[{name:"alert_value",value:"$10,000",description:"Regulatory reporting threshold for individual cash deposits"},{name:"structuring_alert_number_of_deposit",value:"2",description:"Minimum number of sub-threshold deposits within the window to trigger alert"}],m=["#395E9D","#E24A33","#348ABD","#988ED5","#777777","#FBC15E","#8EBA42","#FFB5B8"],b=()=>{const o=c.filter(t=>t.flagged).map((t,n)=>({label:t.accountId,color:m[n%m.length],data:t.deposits.map(i=>({date:i.date,amount:i.amount}))})),r=c.map(t=>({accountId:t.accountId,depositCount:t.depositCount,totalAmount:t.totalAmount,avgDeposit:Math.round(t.totalAmount/t.depositCount),flagged:t.flagged}));return e.jsxs(h,{title:"Structuring Detection",category:"Transaction Monitoring",description:e.jsx(e.Fragment,{children:e.jsx("p",{children:"Detects deposits intentionally broken into smaller amounts below regulatory reporting thresholds (typically $10,000) to avoid Currency Transaction Reports (CTRs)."})}),parameters:y,detectionLogic:e.jsxs("ol",{children:[e.jsx("li",{children:"Monitor deposit transactions per account within rolling window."}),e.jsx("li",{children:"Flag accounts with 2+ deposits where individual amounts are below threshold but aggregate exceeds it."}),e.jsx("li",{children:"Score based on proximity of amounts to threshold and frequency."})]}),children:[e.jsx(x,{series:o,title:"Flagged Account Deposit Patterns",thresholdValue:1e4,thresholdLabel:"$10K Reporting Threshold"}),e.jsx(f,{title:"Flagged Accounts",columns:[{key:"accountId",label:"Account"},{key:"depositCount",label:"Deposit Count"},{key:"totalAmount",label:"Total Amount",format:t=>"$"+Number(t).toLocaleString()},{key:"avgDeposit",label:"Avg Deposit",format:t=>"$"+Number(t).toLocaleString()},{key:"flagged",label:"Flagged"}],rows:r,flagKey:"flagged"})]})};export{b as default};

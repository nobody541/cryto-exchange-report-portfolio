import{j as e,P as V}from"./index-BW2FqVvM.js";import{C as h,A as y}from"./AlertsTable-DHAy-Z4r.js";const p=({rows:a,xKey:i,yKey:r,title:s,thresholdValue:o,thresholdLabel:u,highlightKey:t})=>{if(!a||!a.length)return e.jsx("div",{className:"chart-empty",children:"No volume data available."});const n=a.map(l=>l[i]),m=a.map(l=>l[r]),v=a.map((l,f)=>{if(t&&l[t])return"red"}),c=t&&a.some(l=>l[t])?{color:v.map((l,f)=>l||"#395E9D"),opacity:.8}:{color:m,colorscale:"Viridis",opacity:.8},d=[];o!=null&&d.push({type:"line",x0:0,x1:1,xref:"paper",y0:o,y1:o,line:{color:"red",width:2,dash:"dash"}});const g=[];return o!=null&&u&&g.push({x:1,xref:"paper",y:o,yanchor:"bottom",xanchor:"right",text:u,showarrow:!1,font:{size:12,color:"red"}}),e.jsx(V,{className:"plotly-chart",data:[{x:n,y:m,type:"bar",marker:c,hovertemplate:"%{x}<br>%{y:,.2f}<extra></extra>"}],layout:{title:{text:s||"",font:{size:18,color:"#395E9D"},x:.5,xanchor:"center"},xaxis:{titlefont:{size:16},tickfont:{size:14},showgrid:!0,gridwidth:1,gridcolor:"Gray"},yaxis:{titlefont:{size:16},tickfont:{size:14},showgrid:!0,gridwidth:1,gridcolor:"Gray"},shapes:d,annotations:g,margin:{t:60,l:60,r:20,b:60},paper_bgcolor:"white",plot_bgcolor:"white"},config:{displayModeBar:!1,responsive:!0},useResizeHandler:!0,style:{width:"100%",height:"320px"}})},x=[{date:"2024-01-01",volume:12400,avgVolume:14200,flagged:!1},{date:"2024-01-02",volume:15800,avgVolume:14200,flagged:!1},{date:"2024-01-03",volume:13100,avgVolume:14200,flagged:!1},{date:"2024-01-04",volume:11900,avgVolume:14200,flagged:!1},{date:"2024-01-05",volume:16200,avgVolume:14200,flagged:!1},{date:"2024-01-06",volume:14700,avgVolume:14200,flagged:!1},{date:"2024-01-07",volume:13500,avgVolume:14200,flagged:!1},{date:"2024-01-08",volume:15100,avgVolume:14200,flagged:!1},{date:"2024-01-09",volume:12800,avgVolume:14200,flagged:!1},{date:"2024-01-10",volume:14400,avgVolume:14200,flagged:!1},{date:"2024-01-11",volume:52300,avgVolume:14200,flagged:!0},{date:"2024-01-12",volume:16900,avgVolume:14200,flagged:!1},{date:"2024-01-13",volume:13700,avgVolume:14200,flagged:!1},{date:"2024-01-14",volume:14900,avgVolume:14200,flagged:!1},{date:"2024-01-15",volume:11600,avgVolume:14200,flagged:!1},{date:"2024-01-16",volume:15500,avgVolume:14200,flagged:!1},{date:"2024-01-17",volume:13200,avgVolume:14200,flagged:!1},{date:"2024-01-18",volume:14800,avgVolume:14200,flagged:!1},{date:"2024-01-19",volume:12300,avgVolume:14200,flagged:!1},{date:"2024-01-20",volume:15700,avgVolume:14200,flagged:!1},{date:"2024-01-21",volume:67800,avgVolume:14200,flagged:!0},{date:"2024-01-22",volume:14100,avgVolume:14200,flagged:!1},{date:"2024-01-23",volume:13800,avgVolume:14200,flagged:!1},{date:"2024-01-24",volume:16100,avgVolume:14200,flagged:!1},{date:"2024-01-25",volume:12500,avgVolume:14200,flagged:!1},{date:"2024-01-26",volume:14600,avgVolume:14200,flagged:!1},{date:"2024-01-27",volume:45100,avgVolume:14200,flagged:!0},{date:"2024-01-28",volume:13900,avgVolume:14200,flagged:!1},{date:"2024-01-29",volume:15300,avgVolume:14200,flagged:!1},{date:"2024-01-30",volume:14e3,avgVolume:14200,flagged:!1}],D=[{accountId:"ACC-7821",symbol:"BTC/USD",totalVolume:285e3,avgDailyVolume:42e3,deviationPct:578.6,flagged:!0},{accountId:"ACC-3394",symbol:"ETH/USD",totalVolume:192e3,avgDailyVolume:31500,deviationPct:509.5,flagged:!0},{accountId:"ACC-5510",symbol:"BTC/USD",totalVolume:147e3,avgDailyVolume:28e3,deviationPct:425,flagged:!0},{accountId:"ACC-1287",symbol:"SOL/USD",totalVolume:89e3,avgDailyVolume:22e3,deviationPct:304.5,flagged:!0},{accountId:"ACC-6643",symbol:"ETH/USD",totalVolume:64e3,avgDailyVolume:35e3,deviationPct:82.9,flagged:!1},{accountId:"ACC-9102",symbol:"BTC/USD",totalVolume:51e3,avgDailyVolume:44e3,deviationPct:15.9,flagged:!1},{accountId:"ACC-4478",symbol:"AVAX/USD",totalVolume:38e3,avgDailyVolume:19e3,deviationPct:100,flagged:!1},{accountId:"ACC-2056",symbol:"SOL/USD",totalVolume:27e3,avgDailyVolume:25e3,deviationPct:8,flagged:!1}],b=[{name:"UV_num_of_trade_threshold",value:"5",description:"Minimum number of trades required to trigger analysis"},{name:"UV_trade_volume_threshold",value:"$2,000",description:"Minimum individual trade volume to be considered"},{name:"UV_pct_threshold_ADV",value:"30%",description:"Percentage of average daily volume (ADV) that triggers ADV-based alert"},{name:"UV_pct_threshold_UserId",value:"20%",description:"Percentage threshold for user-level historical volume deviation"},{name:"UV_min_volume",value:"$1,000",description:"Minimum cumulative volume in the analysis window"},{name:"UV_min_15m_volume",value:"$5,000",description:"Minimum 15-minute rolling window volume to qualify for ADV check"}],U=()=>e.jsxs(h,{title:"Unusual Volume Detection (UV)",category:"Trade Surveillance",description:e.jsx(e.Fragment,{children:e.jsx("p",{children:"Detects users trading abnormally high volumes compared to their 30-day historical average (UHV approach) or as a percentage of market average daily volume (ADV approach)."})}),parameters:b,detectionLogic:e.jsxs("ol",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"UHV:"})," Calculate mean + 4×std_dev of user’s 30-day volume. Flag if current volume exceeds this threshold."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"ADV:"})," Calculate market’s 7-day ADV. Flag if user’s 15-min volume > configured percentage of market ADV."]}),e.jsx("li",{children:"Both methods require minimum trade count and volume thresholds to be met."})]}),children:[e.jsx(p,{rows:x,xKey:"date",yKey:"volume",highlightKey:"flagged",thresholdValue:14200*4,thresholdLabel:"Alert Threshold (4σ)",title:"Daily Volume with Alert Threshold"}),e.jsx(y,{title:"Flagged Accounts",columns:[{key:"accountId",label:"Account"},{key:"symbol",label:"Symbol"},{key:"totalVolume",label:"Total Volume",format:a=>"$"+Number(a).toLocaleString()},{key:"avgDailyVolume",label:"Avg Daily Volume",format:a=>"$"+Number(a).toLocaleString()},{key:"deviationPct",label:"Deviation %",format:a=>a+"%"},{key:"flagged",label:"Flagged"}],rows:D,flagKey:"flagged"})]});export{U as default};

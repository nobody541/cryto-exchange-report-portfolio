import{j as e,P as p}from"./index-Bn2Cv40y.js";import{C as S,A as m}from"./AlertsTable-C3QDAQwr.js";const u=({levels:o,highlightPrice:a,title:t})=>{if(!o||!o.length)return e.jsx("div",{className:"chart-empty",children:"No order book data available."});const l=o.map(i=>i.price),n=o.map(i=>i.bidSize||0),d=o.map(i=>i.askSize||0),s=o.map(i=>a!=null&&i.price===a?"orange":"rgba(34, 139, 34, 0.7)"),c=o.map(i=>a!=null&&i.price===a?"orange":"rgba(220, 20, 60, 0.7)");return e.jsx(p,{className:"plotly-chart",data:[{y:l,x:n.map(i=>-i),type:"bar",orientation:"h",name:"Bids",marker:{color:s},hovertemplate:"Price: %{y}<br>Bid Size: %{customdata:,.2f}<extra></extra>",customdata:n},{y:l,x:d,type:"bar",orientation:"h",name:"Asks",marker:{color:c},hovertemplate:"Price: %{y}<br>Ask Size: %{x:,.2f}<extra></extra>"}],layout:{title:{text:t||"",font:{size:18,color:"#395E9D"},x:.5,xanchor:"center"},xaxis:{title:"Order Size",titlefont:{size:16},tickfont:{size:14},showgrid:!0,gridwidth:1,gridcolor:"Gray",tickvals:void 0,ticktext:void 0},yaxis:{title:"Price",titlefont:{size:16},tickfont:{size:14},showgrid:!0,gridwidth:1,gridcolor:"Gray",type:"category"},barmode:"overlay",margin:{t:60,l:80,r:20,b:60},paper_bgcolor:"white",plot_bgcolor:"white",legend:{orientation:"h",y:-.2}},config:{displayModeBar:!1,responsive:!0},useResizeHandler:!0,style:{width:"100%",height:"320px"}})},f=[{eventId:"SPF-0012",accountId:"ACC-9910",symbol:"BTC/USD",spoofSide:"Buy",spoofSize:125e3,spoofPrice:42150,cancelTime:2.3,tradeSide:"Sell",tradeSize:8500,tradePrice:42180.5,tradeNotional:358534.25,flagged:!0},{eventId:"SPF-0018",accountId:"ACC-3345",symbol:"ETH/USD",spoofSide:"Sell",spoofSize:84e3,spoofPrice:2285,cancelTime:1.8,tradeSide:"Buy",tradeSize:12200,tradePrice:2278.25,tradeNotional:27794.65,flagged:!1},{eventId:"SPF-0024",accountId:"ACC-9910",symbol:"BTC/USD",spoofSide:"Buy",spoofSize:21e4,spoofPrice:42300,cancelTime:3.1,tradeSide:"Sell",tradeSize:15400,tradePrice:42345,tradeNotional:652113,flagged:!0},{eventId:"SPF-0031",accountId:"ACC-6682",symbol:"SOL/USD",spoofSide:"Sell",spoofSize:19e4,spoofPrice:98.5,cancelTime:4.2,tradeSide:"Buy",tradeSize:22e3,tradePrice:97.8,tradeNotional:2151600,flagged:!0}],r=[{price:42400,bidSize:120,askSize:450},{price:42380,bidSize:280,askSize:620},{price:42360,bidSize:350,askSize:510},{price:42340,bidSize:410,askSize:390},{price:42320,bidSize:520,askSize:280},{price:42300,bidSize:8500,askSize:150},{price:42280,bidSize:680,askSize:95},{price:42260,bidSize:430,askSize:70},{price:42240,bidSize:310,askSize:45},{price:42220,bidSize:250,askSize:30},{price:42200,bidSize:190,askSize:20},{price:42180,bidSize:140,askSize:15}],b=[{name:"cancellation_period",value:"5 seconds",description:"Maximum time between order placement and cancellation to qualify as spoof"},{name:"execution_period",value:"30 seconds",description:"Maximum time between spoof cancellation and opposite-side execution"},{name:"cancellation_volume_multiplier",value:"10x",description:"Minimum ratio of cancelled volume to executed volume"},{name:"minimum_executed_notional",value:"$50,000",description:"Minimum notional value of the executed opposite-side trade"},{name:"two_sided_order_skew",value:"0.75",description:"Maximum skew ratio between spoof and execution sides of the book"}],y=()=>{const o=r.reduce((a,t)=>t.bidSize>a.bidSize?t:a,r[0]);return e.jsxs(S,{title:"Spoofing Detection (SPF)",category:"Trade Surveillance",description:e.jsx(e.Fragment,{children:e.jsx("p",{children:"Detects order spoofing and layering â€” placing large non-bona fide orders to create false impression of market demand/supply, then cancelling them and trading on the opposite side at more favorable prices."})}),parameters:b,detectionLogic:e.jsxs("ol",{children:[e.jsx("li",{children:"Monitor for large order placements followed by rapid cancellations."}),e.jsx("li",{children:"Check if cancellation occurs within configured time period."}),e.jsx("li",{children:"Verify subsequent execution on opposite side within execution window."}),e.jsx("li",{children:"Validate cancellation volume exceeds multiplier threshold relative to execution volume."})]}),children:[e.jsx(u,{levels:r,highlightPrice:o.price,title:"Order Book Snapshot (Spoof Highlighted)"}),e.jsx(m,{title:"Flagged Events",columns:[{key:"eventId",label:"Event ID"},{key:"accountId",label:"Account"},{key:"symbol",label:"Symbol"},{key:"spoofSide",label:"Spoof Side"},{key:"spoofSize",label:"Spoof Size"},{key:"cancelTime",label:"Cancel Time (s)"},{key:"tradeSide",label:"Trade Side"},{key:"tradeSize",label:"Trade Size"},{key:"tradeNotional",label:"Trade Notional",format:a=>"$"+Number(a).toLocaleString()},{key:"flagged",label:"Flagged"}],rows:f,flagKey:"flagged"})]})};export{y as default};

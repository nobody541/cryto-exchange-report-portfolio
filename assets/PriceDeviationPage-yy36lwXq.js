import{j as t,P as n}from"./index-B2CoulP4.js";import{C as l,A as P}from"./AlertsTable-CTJgvT4h.js";const o=[{tradeId:"PD-001",accountId:"ACC-1001",symbol:"BTC/USD",tradePrice:41500,marketPrice:42800,deviationPct:-3.04,timestamp:"2024-01-15 14:30",flagged:!0},{tradeId:"PD-002",accountId:"ACC-1018",symbol:"ETH/USD",tradePrice:2380,marketPrice:2310,deviationPct:3.03,timestamp:"2024-01-16 09:15",flagged:!0},{tradeId:"PD-003",accountId:"ACC-1033",symbol:"BTC/USD",tradePrice:43200,marketPrice:42900,deviationPct:.7,timestamp:"2024-01-16 11:45",flagged:!1},{tradeId:"PD-004",accountId:"ACC-1040",symbol:"SOL/USD",tradePrice:88.5,marketPrice:95.2,deviationPct:-7.04,timestamp:"2024-01-17 16:22",flagged:!0},{tradeId:"PD-005",accountId:"ACC-1055",symbol:"BTC/USD",tradePrice:42750,marketPrice:42800,deviationPct:-.12,timestamp:"2024-01-18 10:05",flagged:!1},{tradeId:"PD-006",accountId:"ACC-1062",symbol:"ETH/USD",tradePrice:2250,marketPrice:2315,deviationPct:-2.81,timestamp:"2024-01-18 14:50",flagged:!0},{tradeId:"PD-007",accountId:"ACC-1079",symbol:"BTC/USD",tradePrice:44100,marketPrice:42850,deviationPct:2.92,timestamp:"2024-01-19 08:30",flagged:!0},{tradeId:"PD-008",accountId:"ACC-1086",symbol:"SOL/USD",tradePrice:94.8,marketPrice:95.1,deviationPct:-.32,timestamp:"2024-01-19 15:10",flagged:!1}],c=[{time:"14:00",marketPrice:42750},{time:"14:05",marketPrice:42770},{time:"14:10",marketPrice:42790},{time:"14:15",marketPrice:42800},{time:"14:20",marketPrice:42810},{time:"14:25",marketPrice:42795},{time:"14:30",marketPrice:42800},{time:"14:35",marketPrice:42820},{time:"14:40",marketPrice:42815},{time:"14:45",marketPrice:42830},{time:"14:50",marketPrice:42825},{time:"14:55",marketPrice:42840},{time:"15:00",marketPrice:42835}],p=[{name:"deviation_threshold",value:"2%",description:"Minimum price deviation from market to flag"},{name:"monitoring_period",value:"24h",description:"Rolling window for price comparison"},{name:"min_trade_notional",value:"$5,000",description:"Minimum trade value to consider"},{name:"base_risk_score",value:"50",description:"Default risk score assigned to alerts"}],u=()=>{const m=c.map(e=>e.time),s=c.map(e=>e.marketPrice),a=o.filter(e=>e.symbol==="BTC/USD"),r=a.filter(e=>e.flagged),i=a.filter(e=>!e.flagged);return t.jsxs(l,{title:"Price Deviation Detection (PD)",category:"Trade Surveillance",description:t.jsx("p",{children:"Identifies trades executed at prices that deviate significantly from prevailing market prices. Such deviations may indicate off-market transactions, preferential pricing, front-running, or other forms of market abuse where trades are intentionally priced away from fair value."}),parameters:p,detectionLogic:t.jsx("p",{children:"Compare each trade price against the contemporaneous market price for the same instrument. Flag trades where the absolute deviation exceeds the configured threshold percentage, provided the trade notional meets the minimum value. Assign risk scores based on deviation magnitude and trade characteristics."}),children:[t.jsx(n,{data:[{x:m,y:s,type:"scatter",mode:"lines",name:"Market Price (BTC/USD)",line:{color:"#395E9D",width:2}},{x:r.map(e=>e.timestamp.split(" ")[1]),y:r.map(e=>e.tradePrice),type:"scatter",mode:"markers",name:"Flagged Trades",marker:{color:"#E74C3C",size:14,symbol:"x",line:{width:2}}},{x:i.map(e=>e.timestamp.split(" ")[1]),y:i.map(e=>e.tradePrice),type:"scatter",mode:"markers",name:"Normal Trades",marker:{color:"#3498DB",size:10,symbol:"circle"}}],layout:{title:{text:"BTC/USD Market Price vs Trade Prices",font:{size:18,color:"#395E9D"}},xaxis:{title:"Time"},yaxis:{title:"Price ($)"},paper_bgcolor:"white",plot_bgcolor:"white",margin:{t:50,r:30,b:50,l:70},legend:{orientation:"h",y:-.2},annotations:[{x:"14:30",y:41500,text:"PD-001: -3.04%",showarrow:!0,arrowhead:2,arrowcolor:"#E74C3C",font:{color:"#E74C3C",size:11},ax:-60,ay:30}]},config:{displayModeBar:!1,responsive:!0},useResizeHandler:!0,style:{width:"100%",height:"320px"}}),t.jsx(P,{title:"Price Deviation Alerts",columns:[{key:"tradeId",label:"Trade ID"},{key:"accountId",label:"Account ID"},{key:"symbol",label:"Symbol"},{key:"tradePrice",label:"Trade Price",format:e=>`$${e.toLocaleString()}`},{key:"marketPrice",label:"Market Price",format:e=>`$${e.toLocaleString()}`},{key:"deviationPct",label:"Deviation %",format:e=>`${e>0?"+":""}${e}%`},{key:"timestamp",label:"Timestamp"}],rows:o,flagKey:"flagged"})]})};export{u as default};
